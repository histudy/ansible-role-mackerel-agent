---
ansible:
  group_vars:
    all:
      mackerel_agent_start_on_setup: no
      mackerel_agent_cfg:
        apikey: "set_your_mackerel_api_key"
        pidfile: /var/run/mackerel-agent.pid
        root: /var/lib/mackerel-agent
        verbose: no
        display_name: My Host
        http_proxy: http://localhost:8080
        roles:
          - My-Service:app
          - Another-Service:db
        host_status:
          on_start: working
          on_stop: poweroff
        filesystems:
          ignore: /dev/ram.*
          use_mountpoint: yes
        plugin:
          metrics:
            apache2: mackerel-plugin-apache2
          checkes:
            log: "/path/to/check-log --file=/path/to/file --pattern=REGEXP --warning-over=N --critical-over=N"
            procs:
              command: "/path/to/check-procs --pattern=PROCESS_NAME --state=STATE --warning-under=N"
dependency:
  name: galaxy
driver:
  name: vagrant
vagrant:
  platforms:
    - name: stretch
      box: histudy/stretch
  providers:
    - name: virtualbox
      type: virtualbox
      options:
        memory: 512
        cpus: 2
  instances:
    - name: mackerel-agent
      ansible_groups:
        - group1
verifier:
  name: serverspec
